import React, { useEffect, useRef } from "react";
import styles from "./styles.module.scss";
import GradientCanvas from "utils/gradientCanvas";

export default function GradientLogo() {
  const canvasRef = useRef(null);

  useEffect(() => {
    if (canvasRef.current) {
      var gradient = new GradientCanvas();
      // @ts-ignore-line
      gradient.initGradient(canvasRef.current);
    }
  }, [canvasRef.current]);

  return (
    <>
      <svg width="0" height="0">
        <clipPath id="svgClip" clipPathUnits="objectBoundingBox">
          <path d="M0.311598 0.37467C0.303054 0.365435 0.29451 0.356012 0.286657 0.346777C0.260335 0.314298 0.248085 0.285777 0.247896 0.257005C0.247645 0.226724 0.258387 0.200842 0.278742 0.182372C0.296709 0.166164 0.321901 0.156741 0.34772 0.156741H0.348788C0.424803 0.156741 0.453262 0.214411 0.463753 0.263161L0.465072 0.269757L0.593418 0.165285L0.594926 0.163965L0.594297 0.162206C0.553589 0.0574821 0.465952 0 0.34772 0H0.344894C0.222453 0.000879508 0.093919 0.0816685 0.084747 0.2342C0.0844957 0.237718 0.0843072 0.241236 0.0843072 0.244943C0.0843072 0.246074 0.0843074 0.247142 0.0840561 0.248272C0.0843074 0.249969 0.0843072 0.251539 0.0843072 0.253047L0.0844958 0.254806C0.0860664 0.330569 0.131612 0.401684 0.160071 0.438749C0.0610631 0.516271 0 0.589961 0 0.716422C0 0.789044 0.0297776 0.85997 0.0821085 0.911358C0.141036 0.96928 0.223333 1 0.320142 1C0.439692 1 0.541527 0.953009 0.607427 0.867634L0.713848 0.967961L0.714727 0.968589L0.941829 0.96884L0.311598 0.37467ZM0.26957 0.548938L0.48461 0.751979C0.457408 0.799849 0.405517 0.856012 0.311158 0.856012C0.290113 0.856012 0.270009 0.852306 0.251351 0.845018C0.200591 0.821774 0.167735 0.771517 0.167735 0.71661C0.167735 0.651904 0.195754 0.603845 0.261466 0.555535L0.26957 0.548938Z" />
        </clipPath>
      </svg>

      <div className={styles.logoClip}>
        <canvas ref={canvasRef} className={styles.gradientCanvas} />
        <img
          src="/assets/stroked-ampersand.svg"
          className={styles.strokedLogo}
        />
      </div>
    </>
  );
}
